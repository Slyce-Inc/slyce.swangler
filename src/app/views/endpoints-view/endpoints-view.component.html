<main role="main" class="container-fluid">
  <div id="swagger-ui-container" class="row">

    <div id="swagger_sidebar" class="col-lg-3 col-xl-2 sps sps--blw">

      <div id="auth_main_container" class="collapse ">
        <div class="row">
          <div class="col-12">

            <app-auth-component [securityDefinitions]='apiData?.spec.securityDefinitions'></app-auth-component>

          </div>
        </div>
      </div>

      <div id="sticky_nav_wrapper" class="sticky-top collapse mb-3">
        <div id="sticky_nav" class="pt-2 pb-2">
          <div class="row" data-navigator="">

            <app-sidebar-nav [tags]='sortedApiData | async' [sectionToExpand]='endpointTag'></app-sidebar-nav>

          </div>
        </div>

        <app-contact class="card d-block" [contactData]='apiData?.spec.info'></app-contact>
      </div>


    </div>

    <div id="resources_container" class="col-lg-9 col-xl-10">
      <div id="resources" class="">
        <div id="resource_Accounts" class="resource">
          <h5 *ngIf="this.wrongTag" class="no-endpoint-data">No data for {{this.endpointTag}}</h5>
          <div *ngIf="!this.wrongTag" class="endpoints" id="Accounts_endpoint_list">
            <div *ngFor="let endpoint of endpoints">
              <app-endpoint *ngIf="endpoint.responses" (clickedTestEndPoint)="this.clickTest($event, modal)" [endpointData]="endpoint" [scrollToId]='scrollToId'></app-endpoint>
              <app-socket-endpoint *ngIf="endpoint.responseMessages" (clickedTestEndPoint)="this.clickTest($event, modal)" [endpointData]="endpoint" [scrollToId]='scrollToId'></app-socket-endpoint>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="modal fade" bsModal #modal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xlg">
      <div class="modal-content">

        <div>
          <div class="modal-header">
            <h5 class="modal-title text-center">{{this['result'].header}}
              <span class="http_method badge badge-primary">{{this['result'].method}}</span>
            </h5>
          </div>
          <div class="modal-body">
            <div class="response"  *ngIf="!this['result'].websocket">
              <small class="text-uppercase">Request URL</small>
              <div class="mt-2 mb-3 request_url">
                <div class="hljs rounded">{{this['result'].url}}</div>
              </div>

              <small class="text-uppercase">Response Body</small>
              <div class="mt-2 mb-3 response_body">
                <pre class="json"><code [innerHTML]="this['result'].responseBody" class="rounded hljs"></code></pre>
              </div>

              <small class="text-uppercase">Response Code</small>
              <div class="mt-2 mb-3 response_code">
                <pre><code class="hljs rounded" [innerHTML]="this['result'].responseCode"></code></pre>
              </div>

              <small class="text-uppercase">Response Headers</small>
              <div class="mt-2 response_headers">
                <pre clas="json"><code class="hljs rounded json" [innerHTML]="this['result'].responseHeader"></code></pre>
              </div>
            </div>

            <div class="response"  *ngIf="this['result'].websocket">
              <small class="text-uppercase">Request URL</small>
              <div class="mt-2 mb-3 request_url">
                <div class="hljs rounded">{{this['result'].url}}</div>
              </div>


              <small class="text-uppercase">Messages</small>
              <tabset>
                <tab [heading]="this['result'].websocket" *ngFor="let message of this['result'].messages">
                  <pre class="json">
                    <code [innerHTML]="message" class="rounded hljs"></code>
                  </pre>
                </tab>
              </tabset>

              <small class="text-uppercase">Response Code</small>
              <div class="mt-2 mb-3 response_code">
                <pre><code class="hljs rounded" [innerHTML]="this['result'].responseCode"></code></pre>
              </div>

              <small class="text-uppercase">Response Headers</small>
              <div class="mt-2 response_headers">
                <pre clas="json"><code class="hljs rounded json" [innerHTML]="this['result'].responseHeader"></code></pre>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</main>
